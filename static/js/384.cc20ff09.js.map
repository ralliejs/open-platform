{"version":3,"file":"static/js/384.cc20ff09.js","mappings":"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","sources":["webpack://my-webpack-project/./node_modules/.pnpm/@rallie+load-html@0.13.0/node_modules/@rallie/load-html/dist/index.es.js","webpack://my-webpack-project/./src/dev.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar message = function (info) { return \"[@rallie/load-html] \".concat(info); };\r\nvar basePathRegex = /^(http:\\/\\/|https:\\/\\/|\\/\\/)([^?#]*)(\\?[^?#]+)?(#.+)?/;\r\nvar errors = {\r\n    invalidHtmlPath: function (basePath) { return message(\"Invalid html path: \".concat(basePath)); },\r\n    invalidEntirePath: function (base, src) {\r\n        return message(\"Can not construct a url by the base '\".concat(base, \"' and the path '\").concat(src, \"'\"));\r\n    },\r\n};\r\nvar getEntirePath = function (src, base, regardHtmlPathAsRoot) {\r\n    if (regardHtmlPathAsRoot === void 0) { regardHtmlPathAsRoot = false; }\r\n    if (/^(http:\\/\\/|https:\\/\\/|\\/\\/).+/.test(src)) {\r\n        return src;\r\n    }\r\n    var mathResult = basePathRegex.exec(base);\r\n    if (mathResult) {\r\n        var protocol = mathResult[1];\r\n        var prePath = mathResult[2];\r\n        if (regardHtmlPathAsRoot && src.startsWith('/')) {\r\n            src = src.slice(1);\r\n        }\r\n        var url = '';\r\n        var _protocol = protocol === '//' ? 'http://' : protocol;\r\n        url = new URL(src, _protocol + prePath).href;\r\n        if (protocol === '//') {\r\n            url = url.slice(5);\r\n        }\r\n        return url;\r\n    }\r\n    else {\r\n        console.error(errors.invalidEntirePath(base, src));\r\n        return '';\r\n    }\r\n};\r\nvar cloneElement = function (element) {\r\n    var attributes = Array.from(element.attributes);\r\n    var result = document.createElement(element.tagName);\r\n    attributes.forEach(function (attr) {\r\n        result.setAttribute(attr.name, attr.value);\r\n    });\r\n    result.innerHTML = element.innerHTML;\r\n    return result;\r\n};\r\nvar parseHtmlPath = function (base) {\r\n    var mathResult = basePathRegex.exec(base);\r\n    if (mathResult) {\r\n        var path = mathResult[0];\r\n        var rootSelector = mathResult[4] || null;\r\n        return [path, rootSelector];\r\n    }\r\n    else {\r\n        throw new Error(errors.invalidHtmlPath(base));\r\n    }\r\n};\r\nvar parseHtml = function (html, rootSelector, transferPath) {\r\n    var fragment = document.createElement('html');\r\n    fragment.innerHTML = html;\r\n    var scripts = Array.from(fragment.querySelectorAll('script'))\r\n        .map(function (element) { return cloneElement(element); })\r\n        .map(function (element) {\r\n        var src = element.getAttribute('src');\r\n        if (transferPath && src) {\r\n            element.setAttribute('src', transferPath(src));\r\n        }\r\n        return element;\r\n    });\r\n    var links = Array.from(fragment.querySelectorAll('link'))\r\n        .map(function (element) { return cloneElement(element); })\r\n        .map(function (element) {\r\n        var href = element.getAttribute('href');\r\n        if (transferPath && href) {\r\n            element.setAttribute('href', transferPath(href));\r\n        }\r\n        return element;\r\n    });\r\n    var styles = Array.from(fragment.querySelectorAll('style')).map(function (element) {\r\n        return cloneElement(element);\r\n    });\r\n    return {\r\n        root: rootSelector ? fragment.querySelector(rootSelector) : null,\r\n        scripts: scripts,\r\n        links: links,\r\n        styles: styles,\r\n    };\r\n};\n\nvar loadHtml = function (config) {\r\n    if (config === void 0) { config = {}; }\r\n    return function (ctx, next) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var fetch, htmlEntries, entryUrl;\r\n        var _a;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0:\r\n                    fetch = (_a = config.fetch) !== null && _a !== void 0 ? _a : window.fetch;\r\n                    ctx.loadHtml = function (url) { return __awaiter(void 0, void 0, void 0, function () {\r\n                        var regardHtmlPathAsRoot, res, html, _a, basePath, rootSelector, _b, root, scripts, links, styles, _i, styles_1, style, _c, links_1, link, rootContainer, _d, scripts_1, script;\r\n                        var _e, _f;\r\n                        return __generator(this, function (_g) {\r\n                            switch (_g.label) {\r\n                                case 0:\r\n                                    regardHtmlPathAsRoot = (_f = (_e = ctx.regardHtmlPathAsRoot) !== null && _e !== void 0 ? _e : config.regardHtmlPathAsRoot) !== null && _f !== void 0 ? _f : false;\r\n                                    return [4 /*yield*/, fetch(url)];\r\n                                case 1:\r\n                                    res = _g.sent();\r\n                                    return [4 /*yield*/, res.text()];\r\n                                case 2:\r\n                                    html = _g.sent();\r\n                                    _a = parseHtmlPath(url), basePath = _a[0], rootSelector = _a[1];\r\n                                    _b = parseHtml(html, rootSelector, function (src) {\r\n                                        return getEntirePath(src, basePath, regardHtmlPathAsRoot);\r\n                                    }), root = _b.root, scripts = _b.scripts, links = _b.links, styles = _b.styles;\r\n                                    for (_i = 0, styles_1 = styles; _i < styles_1.length; _i++) {\r\n                                        style = styles_1[_i];\r\n                                        document.head.appendChild(style);\r\n                                    }\r\n                                    for (_c = 0, links_1 = links; _c < links_1.length; _c++) {\r\n                                        link = links_1[_c];\r\n                                        ctx.loadLink(link);\r\n                                    }\r\n                                    if (root) {\r\n                                        rootContainer = document.querySelector(rootSelector);\r\n                                        if (rootContainer) {\r\n                                            rootContainer.innerHTML = root.innerHTML;\r\n                                        }\r\n                                        else {\r\n                                            document.body.appendChild(root);\r\n                                        }\r\n                                    }\r\n                                    _d = 0, scripts_1 = scripts;\r\n                                    _g.label = 3;\r\n                                case 3:\r\n                                    if (!(_d < scripts_1.length)) return [3 /*break*/, 6];\r\n                                    script = scripts_1[_d];\r\n                                    return [4 /*yield*/, ctx.loadScript(script)];\r\n                                case 4:\r\n                                    _g.sent();\r\n                                    _g.label = 5;\r\n                                case 5:\r\n                                    _d++;\r\n                                    return [3 /*break*/, 3];\r\n                                case 6: return [2 /*return*/, !!(scripts.length + links.length + styles.length) || !!root];\r\n                            }\r\n                        });\r\n                    }); };\r\n                    htmlEntries = config.entries || {};\r\n                    entryUrl = htmlEntries[ctx.name];\r\n                    if (!entryUrl) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, ctx.loadHtml(entryUrl)];\r\n                case 1:\r\n                    _b.sent();\r\n                    return [3 /*break*/, 4];\r\n                case 2: return [4 /*yield*/, next()];\r\n                case 3:\r\n                    _b.sent();\r\n                    _b.label = 4;\r\n                case 4: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n};\n\nexport { loadHtml as default, loadHtml };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { core } from '~/blocks/core';\nimport { loadHtml } from '@rallie/load-html';\nexport var runInEntryMode = function (env) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                env.use(loadHtml({\n                    entries: {\n                        'plugin-demo': 'http://localhost:4173',\n                    },\n                }));\n                core.setState('set root', function (state) {\n                    var container = document.createElement('div');\n                    document.body.appendChild(container);\n                    state.root = container;\n                });\n                return [4, core.activate(core.name)];\n            case 1:\n                _a.sent();\n                return [2];\n        }\n    });\n}); };\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","length","push","message","info","concat","basePathRegex","cloneElement","element","attributes","Array","from","document","createElement","tagName","forEach","attr","setAttribute","name","innerHTML","loadHtml","config","ctx","fetch","htmlEntries","entryUrl","_a","_b","window","url","regardHtmlPathAsRoot","html","basePath","rootSelector","root","scripts","links","styles","_i","styles_1","style","_c","links_1","link","rootContainer","_d","scripts_1","script","_e","_f","_g","text","base","mathResult","exec","Error","errors","parseHtmlPath","transferPath","fragment","querySelectorAll","map","src","getAttribute","href","querySelector","parseHtml","test","protocol","prePath","startsWith","slice","URL","console","error","getEntirePath","head","appendChild","loadLink","loadScript","entries","runInEntryMode","env","use","core","state","container"],"sourceRoot":""}