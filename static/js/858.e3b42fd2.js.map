{"version":3,"file":"static/js/858.e3b42fd2.js","mappings":"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","sources":["webpack://my-webpack-project/./node_modules/.pnpm/antd@5.2.1_biqbaboplfbrettd7655fr4n2y/node_modules/antd/es/message/index.js","webpack://my-webpack-project/./src/components/error-boundary.tsx","webpack://my-webpack-project/./src/components/slot.tsx","webpack://my-webpack-project/./src/views/index.page.tsx"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { render } from \"rc-util/es/React/render\";\nimport * as React from 'react';\nimport ConfigProvider, { globalConfig } from '../config-provider';\nimport PurePanel from './PurePanel';\nimport useMessage, { useInternalMessage } from './useMessage';\nimport { wrapPromiseFn } from './util';\nconst methods = ['success', 'info', 'warning', 'error', 'loading'];\nlet message = null;\nlet act = callback => callback();\nlet taskQueue = [];\nlet defaultGlobalConfig = {};\nfunction getGlobalContext() {\n  const {\n    prefixCls: globalPrefixCls,\n    getContainer: globalGetContainer,\n    duration,\n    rtl,\n    maxCount,\n    top\n  } = defaultGlobalConfig;\n  const mergedPrefixCls = globalPrefixCls !== null && globalPrefixCls !== void 0 ? globalPrefixCls : globalConfig().getPrefixCls('message');\n  const mergedContainer = (globalGetContainer === null || globalGetContainer === void 0 ? void 0 : globalGetContainer()) || document.body;\n  return {\n    prefixCls: mergedPrefixCls,\n    container: mergedContainer,\n    duration,\n    rtl,\n    maxCount,\n    top\n  };\n}\nconst GlobalHolder = /*#__PURE__*/React.forwardRef((_, ref) => {\n  const initializeMessageConfig = () => {\n    const {\n      prefixCls,\n      container,\n      maxCount,\n      duration,\n      rtl,\n      top\n    } = getGlobalContext();\n    return {\n      prefixCls,\n      getContainer: () => container,\n      maxCount,\n      duration,\n      rtl,\n      top\n    };\n  };\n  const [messageConfig, setMessageConfig] = React.useState(initializeMessageConfig);\n  const [api, holder] = useInternalMessage(messageConfig);\n  const global = globalConfig();\n  const rootPrefixCls = global.getRootPrefixCls();\n  const rootIconPrefixCls = global.getIconPrefixCls();\n  const sync = () => {\n    setMessageConfig(initializeMessageConfig);\n  };\n  React.useEffect(sync, []);\n  React.useImperativeHandle(ref, () => {\n    const instance = Object.assign({}, api);\n    Object.keys(instance).forEach(method => {\n      instance[method] = function () {\n        sync();\n        return api[method].apply(api, arguments);\n      };\n    });\n    return {\n      instance,\n      sync\n    };\n  });\n  return /*#__PURE__*/React.createElement(ConfigProvider, {\n    prefixCls: rootPrefixCls,\n    iconPrefixCls: rootIconPrefixCls\n  }, holder);\n});\nfunction flushNotice() {\n  if (!message) {\n    const holderFragment = document.createDocumentFragment();\n    const newMessage = {\n      fragment: holderFragment\n    };\n    message = newMessage;\n    // Delay render to avoid sync issue\n    act(() => {\n      render( /*#__PURE__*/React.createElement(GlobalHolder, {\n        ref: node => {\n          const {\n            instance,\n            sync\n          } = node || {};\n          // React 18 test env will throw if call immediately in ref\n          Promise.resolve().then(() => {\n            if (!newMessage.instance && instance) {\n              newMessage.instance = instance;\n              newMessage.sync = sync;\n              flushNotice();\n            }\n          });\n        }\n      }), holderFragment);\n    });\n    return;\n  }\n  // Notification not ready\n  if (!message.instance) {\n    return;\n  }\n  // >>> Execute task\n  taskQueue.forEach(task => {\n    const {\n      type,\n      skipped\n    } = task;\n    // Only `skipped` when user call notice but cancel it immediately\n    // and instance not ready\n    if (!skipped) {\n      switch (type) {\n        case 'open':\n          {\n            act(() => {\n              const closeFn = message.instance.open(Object.assign(Object.assign({}, defaultGlobalConfig), task.config));\n              closeFn === null || closeFn === void 0 ? void 0 : closeFn.then(task.resolve);\n              task.setCloseFn(closeFn);\n            });\n            break;\n          }\n        case 'destroy':\n          act(() => {\n            message === null || message === void 0 ? void 0 : message.instance.destroy(task.key);\n          });\n          break;\n        // Other type open\n        default:\n          {\n            act(() => {\n              var _message$instance;\n              const closeFn = (_message$instance = message.instance)[type].apply(_message$instance, _toConsumableArray(task.args));\n              closeFn === null || closeFn === void 0 ? void 0 : closeFn.then(task.resolve);\n              task.setCloseFn(closeFn);\n            });\n          }\n      }\n    }\n  });\n  // Clean up\n  taskQueue = [];\n}\nfunction setMessageGlobalConfig(config) {\n  defaultGlobalConfig = Object.assign(Object.assign({}, defaultGlobalConfig), config);\n  // Trigger sync for it\n  act(() => {\n    var _a;\n    (_a = message === null || message === void 0 ? void 0 : message.sync) === null || _a === void 0 ? void 0 : _a.call(message);\n  });\n}\nfunction open(config) {\n  const result = wrapPromiseFn(resolve => {\n    let closeFn;\n    const task = {\n      type: 'open',\n      config,\n      resolve,\n      setCloseFn: fn => {\n        closeFn = fn;\n      }\n    };\n    taskQueue.push(task);\n    return () => {\n      if (closeFn) {\n        act(() => {\n          closeFn();\n        });\n      } else {\n        task.skipped = true;\n      }\n    };\n  });\n  flushNotice();\n  return result;\n}\nfunction typeOpen(type, args) {\n  const result = wrapPromiseFn(resolve => {\n    let closeFn;\n    const task = {\n      type,\n      args,\n      resolve,\n      setCloseFn: fn => {\n        closeFn = fn;\n      }\n    };\n    taskQueue.push(task);\n    return () => {\n      if (closeFn) {\n        act(() => {\n          closeFn();\n        });\n      } else {\n        task.skipped = true;\n      }\n    };\n  });\n  flushNotice();\n  return result;\n}\nfunction destroy(key) {\n  taskQueue.push({\n    type: 'destroy',\n    key\n  });\n  flushNotice();\n}\nconst baseStaticMethods = {\n  open,\n  destroy,\n  config: setMessageGlobalConfig,\n  useMessage,\n  _InternalPanelDoNotUseOrYouWillBeFired: PurePanel\n};\nconst staticMethods = baseStaticMethods;\nmethods.forEach(type => {\n  staticMethods[type] = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return typeOpen(type, args);\n  };\n});\n// ==============================================================================\n// ==                                   Test                                   ==\n// ==============================================================================\nconst noop = () => {};\n/** @private Only Work in test env */\n// eslint-disable-next-line import/no-mutable-exports\nexport let actWrapper = noop;\nif (process.env.NODE_ENV === 'test') {\n  actWrapper = wrapper => {\n    act = wrapper;\n  };\n}\n/** @private Only Work in test env */\n// eslint-disable-next-line import/no-mutable-exports\nexport let actDestroy = noop;\nif (process.env.NODE_ENV === 'test') {\n  actDestroy = () => {\n    message = null;\n  };\n}\nexport default staticMethods;","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React from 'react';\nimport { message } from 'antd';\nvar ErrorBoundary = (function (_super) {\n    __extends(ErrorBoundary, _super);\n    function ErrorBoundary(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            hasError: false,\n        };\n        return _this;\n    }\n    ErrorBoundary.prototype.componentDidCatch = function (error, errorInfo) {\n        console.error(error, errorInfo);\n        message.error(this.props.errorMessage || 'Something went wrong');\n        this.setState({\n            hasError: true,\n        });\n    };\n    ErrorBoundary.prototype.render = function () {\n        if (this.state.hasError) {\n            return this.props.fallback || null;\n        }\n        return this.props.children;\n    };\n    return ErrorBoundary;\n}(React.PureComponent));\nexport { ErrorBoundary };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useBlockState } from '@rallie/react';\nimport { core } from '~/blocks/core';\nimport { Async } from './async';\nimport { ErrorBoundary } from './error-boundary';\nexport var Slot = function (props) {\n    var selector = props.selector, fallback = props.fallback, _a = props.errorMessage, errorMessage = _a === void 0 ? '插件资源出错，请联系管理员' : _a, _b = props.children, children = _b === void 0 ? null : _b;\n    var loader = useBlockState(core, function (state) { return selector(state.slot); });\n    if (loader) {\n        return (_jsx(ErrorBoundary, __assign({ fallback: fallback, errorMessage: errorMessage }, { children: _jsx(Async, { loader: loader }) })));\n    }\n    else {\n        return _jsx(_Fragment, { children: children });\n    }\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Slot } from '@/slot';\nvar IndexPage = function () {\n    return _jsx(Slot, __assign({ selector: function (slot) { return slot.home; } }, { children: \"\\u9996\\u9875\" }));\n};\nexport default IndexPage;\n"],"names":["message","act","callback","taskQueue","defaultGlobalConfig","GlobalHolder","_","ref","initializeMessageConfig","prefixCls","container","maxCount","duration","rtl","top","globalPrefixCls","getContainer","globalGetContainer","getPrefixCls","document","body","getGlobalContext","messageConfig","setMessageConfig","api","holder","global","rootPrefixCls","getRootPrefixCls","rootIconPrefixCls","getIconPrefixCls","sync","instance","Object","assign","keys","forEach","method","apply","arguments","iconPrefixCls","flushNotice","holderFragment","createDocumentFragment","newMessage","fragment","node","Promise","resolve","then","task","type","skipped","closeFn","open","config","setCloseFn","destroy","key","_message$instance","args","staticMethods","result","fn","push","_a","call","useMessage","_InternalPanelDoNotUseOrYouWillBeFired","_len","length","Array","_key","typeOpen","extendStatics","__extends","d","b","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","TypeError","String","__","this","constructor","create","ErrorBoundary","_super","props","_this","state","hasError","componentDidCatch","error","errorInfo","console","errorMessage","setState","render","fallback","children","__assign","t","s","i","n","Slot","selector","_b","loader","core","slot","home"],"sourceRoot":""}