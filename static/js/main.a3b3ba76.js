(()=>{"use strict";var t,e,n,r,i,s,o,a={8426:(t,e,n)=>{function r(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function i(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}function s(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}function o(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function a(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}n.d(e,{v:()=>Ee});const c=Object.assign,l=Object.prototype.hasOwnProperty,h=(t,e)=>l.call(t,e),u=Array.isArray,f=t=>"[object Map]"===v(t),d=t=>"symbol"==typeof t,p=t=>null!==t&&"object"==typeof t,w=Object.prototype.toString,v=t=>w.call(t),y=t=>v(t).slice(8,-1),b=t=>"string"==typeof t&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,m=(Object.create(null),(t,e)=>!Object.is(t,e)),g=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _;function E(t,e=_){e&&e.active&&e.effects.push(t)}const S=t=>{const e=new Set(t);return e.w=0,e.n=0,e},k=t=>(t.w&x)>0,j=t=>(t.n&x)>0,O=new WeakMap;let P=0,x=1;const A=30;let M;const R=Symbol(""),T=Symbol("");class ${constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,E(this,n)}run(){if(!this.active)return this.fn();let t=M,e=L;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=M,M=this,L=!0,x=1<<++P,P<=A?(({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=x})(this):W(this),this.fn()}finally{P<=A&&(t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];k(i)&&!j(i)?i.delete(t):e[n++]=i,i.w&=~x,i.n&=~x}e.length=n}})(this),x=1<<--P,M=this.parent,L=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){M===this?this.deferStop=!0:this.active&&(W(this),this.onStop&&this.onStop(),this.active=!1)}}function W(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let L=!0;const B=[];function U(t,e,n){if(L&&M){let e=O.get(t);e||O.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=S()),function(t,e){let n=!1;P<=A?j(t)||(t.n|=x,n=!k(t)):n=!t.has(M),n&&(t.add(M),M.deps.push(t))}(r)}}function z(t,e,n,r,i,s){const o=O.get(t);if(!o)return;let a=[];if("clear"===e)a=[...o.values()];else if("length"===n&&u(t)){const t=g(r);o.forEach(((e,n)=>{("length"===n||n>=t)&&a.push(e)}))}else switch(void 0!==n&&a.push(o.get(n)),e){case"add":u(t)?b(n)&&a.push(o.get("length")):(a.push(o.get(R)),f(t)&&a.push(o.get(T)));break;case"delete":u(t)||(a.push(o.get(R)),f(t)&&a.push(o.get(T)));break;case"set":f(t)&&a.push(o.get(R))}if(1===a.length)a[0]&&C(a[0]);else{const t=[];for(const e of a)e&&t.push(...e);C(S(t))}}function C(t,e){const n=u(t)?t:[...t];for(const t of n)t.computed&&N(t);for(const t of n)t.computed||N(t)}function N(t,e){(t!==M||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const I=function(t,e){const n=Object.create(null),r="__proto__,__v_isRef,__isVue".split(",");for(let t=0;t<r.length;t++)n[r[t]]=!0;return t=>!!n[t]}(),F=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(d)),D=J(),G=J(!0),H=function(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Et(this);for(let t=0,e=this.length;t<e;t++)U(n,0,t+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Et)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){B.push(L),L=!1;const n=Et(this)[e].apply(this,t);return function(){const t=B.pop();L=void 0===t||t}(),n}})),t}();function J(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_isShallow"===r)return e;if("__v_raw"===r&&i===(t?e?yt:vt:e?wt:pt).get(n))return n;const s=u(n);if(!t&&s&&h(H,r))return Reflect.get(H,r,i);const o=Reflect.get(n,r,i);return(d(r)?F.has(r):I(r))?o:(t||U(n,0,r),e?o:jt(o)?s&&b(r)?o:o.value:p(o)?t?mt(o):bt(o):o)}}const K={get:D,set:function(t=!1){return function(e,n,r,i){let s=e[n];if(_t(s)&&jt(s)&&!jt(r))return!1;if(!t&&(function(t){return!(!t||!t.__v_isShallow)}(r)||_t(r)||(s=Et(s),r=Et(r)),!u(e)&&jt(s)&&!jt(r)))return s.value=r,!0;const o=u(e)&&b(n)?Number(n)<e.length:h(e,n),a=Reflect.set(e,n,r,i);return e===Et(i)&&(o?m(r,s)&&z(e,"set",n,r):z(e,"add",n,r)),a}}(),deleteProperty:function(t,e){const n=h(t,e),r=(t[e],Reflect.deleteProperty(t,e));return r&&n&&z(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return d(e)&&F.has(e)||U(t,0,e),n},ownKeys:function(t){return U(t,0,u(t)?"length":R),Reflect.ownKeys(t)}},q={get:G,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},V=t=>t,Q=t=>Reflect.getPrototypeOf(t);function X(t,e,n=!1,r=!1){const i=Et(t=t.__v_raw),s=Et(e);n||(e!==s&&U(i,0,e),U(i,0,s));const{has:o}=Q(i),a=r?V:n?kt:St;return o.call(i,e)?a(t.get(e)):o.call(i,s)?a(t.get(s)):void(t!==i&&t.get(e))}function Y(t,e=!1){const n=this.__v_raw,r=Et(n),i=Et(t);return e||(t!==i&&U(r,0,t),U(r,0,i)),t===i?n.has(t):n.has(t)||n.has(i)}function Z(t,e=!1){return t=t.__v_raw,!e&&U(Et(t),0,R),Reflect.get(t,"size",t)}function tt(t){t=Et(t);const e=Et(this);return Q(e).has.call(e,t)||(e.add(t),z(e,"add",t,t)),this}function et(t,e){e=Et(e);const n=Et(this),{has:r,get:i}=Q(n);let s=r.call(n,t);!s&&(t=Et(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?m(e,o)&&z(n,"set",t,e):z(n,"add",t,e),this}function nt(t){const e=Et(this),{has:n,get:r}=Q(e);let i=n.call(e,t);!i&&(t=Et(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&z(e,"delete",t,void 0),s}function rt(){const t=Et(this),e=0!==t.size,n=t.clear();return e&&z(t,"clear",void 0,void 0),n}function it(t,e){return function(n,r){const i=this,s=i.__v_raw,o=Et(s),a=e?V:t?kt:St;return!t&&U(o,0,R),s.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function st(t,e,n){return function(...r){const i=this.__v_raw,s=Et(i),o=f(s),a="entries"===t||t===Symbol.iterator&&o,c="keys"===t&&o,l=i[t](...r),h=n?V:e?kt:St;return!e&&U(s,0,c?T:R),{next(){const{value:t,done:e}=l.next();return e?{value:t,done:e}:{value:a?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function ot(t){return function(...e){return"delete"!==t&&this}}const[at,ct,lt,ht]=function(){const t={get(t){return X(this,t)},get size(){return Z(this)},has:Y,add:tt,set:et,delete:nt,clear:rt,forEach:it(!1,!1)},e={get(t){return X(this,t,!1,!0)},get size(){return Z(this)},has:Y,add:tt,set:et,delete:nt,clear:rt,forEach:it(!1,!0)},n={get(t){return X(this,t,!0)},get size(){return Z(this,!0)},has(t){return Y.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:it(!0,!1)},r={get(t){return X(this,t,!0,!0)},get size(){return Z(this,!0)},has(t){return Y.call(this,t,!0)},add:ot("add"),set:ot("set"),delete:ot("delete"),clear:ot("clear"),forEach:it(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=st(i,!1,!1),n[i]=st(i,!0,!1),e[i]=st(i,!1,!0),r[i]=st(i,!0,!0)})),[t,n,e,r]}();function ut(t,e){const n=e?t?ht:lt:t?ct:at;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(h(n,r)&&r in e?n:e,r,i)}const ft={get:ut(!1,!1)},dt={get:ut(!0,!1)},pt=new WeakMap,wt=new WeakMap,vt=new WeakMap,yt=new WeakMap;function bt(t){return _t(t)?t:gt(t,!1,K,ft,pt)}function mt(t){return gt(t,!0,q,dt,vt)}function gt(t,e,n,r,i){if(!p(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=(a=t).__v_skip||!Object.isExtensible(a)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(y(a));var a;if(0===o)return t;const c=new Proxy(t,2===o?r:n);return i.set(t,c),c}function _t(t){return!(!t||!t.__v_isReadonly)}function Et(t){const e=t&&t.__v_raw;return e?Et(e):t}const St=t=>p(t)?bt(t):t,kt=t=>p(t)?mt(t):t;function jt(t){return!(!t||!0!==t.__v_isRef)}const Ot=t=>`[@rallie/core] it's not allowed to set or watch state ${t} before it is initialized`,Pt=t=>(e,n)=>{let r=-1;const i=s=>{if(s<=r)return Promise.reject(new Error("[@rallie/core] next() called multiple times in the middleware"));r=s;let o=t[s];if(s===t.length&&(o=n),!o)return Promise.resolve();try{return Promise.resolve(o(e,i.bind(null,s+1)))}catch(t){return Promise.reject(t)}};return i(0)};var xt,At,Mt,Rt,Tt,$t,Wt,Lt,Bt;class Ut{constructor(){xt.set(this,{}),At.set(this,{})}addBroadcastEventListener(t,e){o(this,xt,"f")[t]=o(this,xt,"f")[t]||new Set,o(this,xt,"f")[t].add(e)}addUnicastEventListener(t,e){if(o(this,At,"f")[t])throw new Error((t=>`[@rallie/core] you are trying to register a unicast event ${t}, but it has been registered before`)(t));o(this,At,"f")[t]=e}removeBroadcastEventListener(t,e){const n=o(this,xt,"f")[t];if(!n){const e=(t=>`[@rallie/core] you are trying to remove a listener of the broadcast event ${t}, but ${t} hasn't been registed as a broadcast event`)(t);throw new Error(e)}if(!n.has(e)){const e=(t=>`[@rallie/core] you are trying to remove a listener of the broadcast event ${t}, but the listener hasn't been registed`)(t);throw new Error(e)}n.delete(e)}removeUnicastEventListener(t){if(!o(this,At,"f")[t]){const e=(t=>`[@rallie/core] you are trying to remove a listener of the unicast event ${t}, but ${t} hasn't been registed as a unicast event`)(t);throw new Error(e)}delete o(this,At,"f")[t]}emitBroadcast(t,...e){o(this,xt,"f")[t]=o(this,xt,"f")[t]||new Set,o(this,xt,"f")[t].forEach((n=>{try{n(...e)}catch(n){console.error((t=>`[@rallie/core] one of the callbacks of the broadcast event ${t} throws an uncaught error`)(t)),console.error(n)}}))}emitUnicast(t,...e){const n=o(this,At,"f")[t];if(n)return n(...e);throw new Error((t=>`[@rallie/core] you have emitted ${t} unicast, but there is no listener of this event`)(t))}}xt=new WeakMap,At=new WeakMap;class zt{constructor(t,e){Mt.set(this,void 0),Rt.set(this,void 0),a(this,Mt,t,"f"),a(this,Rt,e,"f"),o(this,Rt,"f")[t].watchers.add(this)}do(t){return this.handler=t,()=>this.unwatch()}unwatch(){null==this||this.stopEffect(),this.handler=null;const t=o(this,Rt,"f")[o(this,Mt,"f")].watchers;t.has(this)&&t.delete(this)}}Mt=new WeakMap,Rt=new WeakMap;class Ct{constructor(t,e){Tt.add(this),$t.set(this,void 0),Wt.set(this,void 0),a(this,$t,t,"f"),a(this,Wt,e,"f")}onBroadcast(t){return Object.entries(t).forEach((([t,e])=>{o(this,$t,"f").addBroadcastEventListener(t,e)})),e=>{o(this,Tt,"m",Lt).call(this,t,!1,e)}}onUnicast(t){return Object.entries(t).forEach((([t,e])=>{try{o(this,$t,"f").addUnicastEventListener(t,e)}catch(t){console.error(t)}})),e=>{o(this,Tt,"m",Lt).call(this,t,!0,e)}}createBroadcaster(t){return new Proxy({},{get:(e,n)=>(...e)=>(null==t||t(n),o(this,$t,"f").emitBroadcast(n,...e)),set:()=>!1})}createUnicaster(t){return new Proxy({},{get:(e,n)=>(...e)=>(null==t||t(n),o(this,$t,"f").emitUnicast(n,...e)),set:()=>!1})}existState(t){return!!o(this,Wt,"f")[t]}initState(t,e,n=!1){if(this.existState(t))throw new Error((t=>`[@rallie/core] duplicated initialized state ${t}`)(t));if(["string","number","boolean","undefined"].includes(typeof e))throw new Error((t=>`[@rallie/core] it's not allowed to initialized state ${t} to a primitive value`)(t));return o(this,Wt,"f")[t]={state:bt(e),owner:n?this:null,watchers:new Set},o(this,$t,"f").emitBroadcast("$state-initialized",t),this.getState(t)}getState(t,e){if(this.existState(t)){const n=mt(o(this,Wt,"f")[t].state);return e?e(n):n}return null}setState(t,e,n){return s(this,void 0,void 0,(function*(){const r=o(this,Tt,"m",Bt).call(this,t);if(!e)throw new Error((t=>`[@rallie/core] please describe your action when you modify the state ${t}`)(t));{const t=n(r);yield Promise.resolve(t)}}))}watchState(t,e){if(!this.existState(t)){const e=Ot(t);throw new Error(e)}let n=!1;const r=mt(o(this,Wt,"f")[t].state),i=new zt(t,o(this,Wt,"f")),s=function(t,e){t.effect&&(t=t.effect.fn);const n=new $(t);e&&(c(n,e),e.scope&&E(n,e.scope)),e&&e.lazy||n.run();const r=n.run.bind(n);return r.effect=n,r}((()=>e(r)),{lazy:!0,scheduler:()=>{n||(n=!0,Promise.resolve().then((()=>{var t;const s=Et(e(r));null===(t=i.handler)||void 0===t||t.call(i,s,i.oldWatchingStates),i.oldWatchingStates=Et(s),n=!1})))}});return i.oldWatchingStates=s(),i.stopEffect=()=>s.effect.stop(),i}}$t=new WeakMap,Wt=new WeakMap,Tt=new WeakSet,Lt=function(t,e,n){let r=e?o(this,$t,"f").removeUnicastEventListener:o(this,$t,"f").removeBroadcastEventListener;r=r.bind(o(this,$t,"f")),n?t[n]?(r(n,t[n]),delete t[n]):console.warn(((t,e)=>`[@rallie/core] the event ${t} is not in the events pool that you specified when calling on${e?"Unicast":"Broadcast"}`)(n,e)):Object.entries(t).forEach((([t,e])=>{r(t,e)}))},Bt=function(t){if(!this.existState(t)){const e=Ot(t);throw new Error(e)}const e=o(this,Wt,"f")[t].owner;if(e!==this&&null!==e){const e=(t=>`[@rallie/core] state ${t} is private, you are not allowed to set it`)(t);throw new Error(e)}return o(this,Wt,"f")[t].state};class Nt{constructor(t){this.name=t,this.activated=null,this.dependencies=[],this.relatedApps=[],this.name=t,this.isRallieCoreApp=!0}relateTo(t){return this.relatedApps=Array.from(new Set([...this.relatedApps,...t])),this}relyOn(t){return this.relateTo(t),this.dependencies=Array.from(new Set([...this.dependencies,...t])),this}onActivate(t){return this.doActivate=t,this}}var It,Ft,Dt,Gt,Ht,Jt,Kt,qt,Vt,Qt,Xt,Yt,Zt,te,ee={loadScript:t=>s(void 0,void 0,void 0,(function*(){return new Promise((e=>{let n=null;if(t instanceof HTMLScriptElement)n=t;else{n=document.createElement("script");const e="string"!=typeof t?t:{type:"text/javascript",src:t};Object.entries(e).forEach((([t,e])=>{n.setAttribute(t,e)}))}n.src&&(n.onload=n.onerror=()=>{e()}),document.body.appendChild(n),n.src||e()}))})),loadLink:t=>{let e=null;if(t instanceof HTMLLinkElement)e=t;else{const n="string"!=typeof t?t:{rel:"stylesheet",type:"text/css",href:t};e=document.createElement("link"),Object.entries(n).forEach((([t,n])=>{e.setAttribute(t,n)}))}document.head.appendChild(e)}};class ne{constructor(t){It.add(this),Ft.set(this,void 0),Dt.set(this,new Ut),Gt.set(this,{}),Ht.set(this,{}),Jt.set(this,{}),this.conf=mt({assets:{}}),Kt.set(this,[]),qt.set(this,void 0),a(this,Ft,t,"f"),a(this,qt,Pt(o(this,Kt,"f")),"f")}createSocket(){return new Ct(o(this,Dt,"f"),o(this,Gt,"f"))}existApp(t){return!!o(this,Ht,"f")[t]}createApp(t){if(this.existApp(t))throw new Error((t=>`[@rallie/core] ${t} is existing, you are not allowed to create it again`)(t));const e=new Nt(t);return o(this,Ht,"f")[t]=e,e}loadApp(t){return s(this,void 0,void 0,(function*(){o(this,Ht,"f")[t]||(o(this,Jt,"f")[t]||(o(this,Jt,"f")[t]=new Promise(((e,n)=>{const r=o(this,It,"m",Qt).call(this,t);o(this,qt,"f").call(this,r,o(this,It,"m",Xt).bind(this)).then((()=>{t.startsWith("lib:")&&!o(this,Ht,"f")[t]&&(o(this,Ht,"f")[t]=!0),o(this,Ht,"f")[t]||n(new Error((t=>`[@rallie/core] you are trying to activate app ${t}, but it was not created`)(t))),e()})).catch((t=>{n(t)}))}))),yield o(this,Jt,"f")[t])}))}activateApp(t){return s(this,void 0,void 0,(function*(){yield o(this,It,"m",Yt).call(this,t,[])}))}config(t){return this.conf=Object.assign(Object.assign(Object.assign({},this.conf),t),{assets:Object.assign(Object.assign({},this.conf.assets),(null==t?void 0:t.assets)||{})}),this}use(t){if("function"!=typeof t)throw new Error("[@rallie/core] the middleware must be a function");return o(this,Kt,"f").push(t),a(this,qt,Pt(o(this,Kt,"f")),"f"),this}}Ft=new WeakMap,Dt=new WeakMap,Gt=new WeakMap,Ht=new WeakMap,Jt=new WeakMap,Kt=new WeakMap,qt=new WeakMap,It=new WeakSet,Vt=function(t){return o(this,Ht,"f")[t]&&"boolean"!=typeof o(this,Ht,"f")[t]},Qt=function(t){return{name:t,loadScript:ee.loadScript,loadLink:ee.loadLink}},Xt=function(t){return s(this,void 0,void 0,(function*(){const{name:e,loadScript:n=ee.loadScript,loadLink:r=ee.loadLink}=t,{assets:i}=this.conf;if(!i[e])throw new Error(((t,e)=>`[@rallie/core] can not find any assets of the app ${t} on the bus ${e}`)(e,o(this,Ft,"f")));if(i[e].css&&i[e].css.forEach((t=>{r(t)})),i[e].js)for(const t of i[e].js)yield n(t)}))},Yt=function(t,e){return s(this,void 0,void 0,(function*(){if(yield this.loadApp(t),o(this,It,"m",Vt).call(this,t)){const n=o(this,Ht,"f")[t];if(yield o(this,It,"m",te).call(this,n),e.includes(t)){const n=e.indexOf(t),r=[...e.slice(n),t];throw new Error(((t,e)=>`[@rallie/core] There is a circular dependency when activating the app ${t}, and the circular path is ${e.join("->")}`)(t,r))}if(e.push(t),!n.activated){const t=()=>s(this,void 0,void 0,(function*(){yield o(this,It,"m",Zt).call(this,n,e),n.doActivate&&(yield Promise.resolve(n.doActivate()))}));n.activated=t()}yield n.activated,e.pop()}}))},Zt=function(t,e){return s(this,void 0,void 0,(function*(){if(0!==t.dependencies.length)for(const n of t.dependencies)yield o(this,It,"m",Yt).call(this,n,e)}))},te=function(t){return s(this,void 0,void 0,(function*(){yield Promise.all(t.relatedApps.map((t=>this.loadApp(t))))}))};const re={},ie="DEFAULT_BUS",se=(t=ie)=>{let e=null,n=!1;const r=((t=ie)=>window.RALLIE_BUS_STORE&&window.RALLIE_BUS_STORE[t])(t);return r?(e=r,n=!1):(e=((t=ie)=>{if(void 0===window.RALLIE_BUS_STORE&&Reflect.defineProperty(window,"RALLIE_BUS_STORE",{value:re,writable:!1}),window.RALLIE_BUS_STORE[t])throw new Error((t=>`[@rallie/core] the bus named ${t} has been defined before, please rename your bus`)(t));{const e=new ne(t);return Reflect.defineProperty(window.RALLIE_BUS_STORE,t,{value:e,writable:!1}),e}})(t),n=!0),[e,n]},oe=t=>`${t}.bus`,ae=t=>`${t}.state`,ce="isGlobalBusAccessible",le=t=>`[rallie] ${t}`,he=t=>le(` the block ${t}'s state is not initialized, please check:\n1. whether the block ${t} is loaded.\n2. whether the block ${t} has initialized the state`),ue=t=>le(`the block ${t} is already registered before, please rename your block`),fe=t=>le(`the state of ${t} is readonly`);var de,pe,we,ve,ye,be,me;class ge{constructor(t,e){de.set(this,void 0),this.name=t,i(this,de,e,"f"),this.events=r(this,de,"f").createBroadcaster(),this.methods=r(this,de,"f").createUnicaster(),Reflect.defineProperty(this,"state",{get:()=>r(this,de,"f").getState(ae(this.name)),set:()=>{throw new Error(fe(this.name))}})}setState(t,e){if(r(this,de,"f").existState(ae(this.name)))return r(this,de,"f").setState(ae(this.name),t,e);throw new Error(he(this.name))}watchState(t){if(r(this,de,"f").existState(ae(this.name)))return r(this,de,"f").watchState(ae(this.name),t);throw new Error(he(this.name))}listenEvents(t){return r(this,de,"f").onBroadcast(t)}}de=new WeakMap;class _e extends ge{constructor(t,e,n,r){const[s]=se(oe(t)),o=s.createSocket();super(t,o),pe.set(this,void 0),we.set(this,void 0),ve.set(this,void 0),ye.set(this,void 0),be.set(this,void 0),me.set(this,{}),i(this,ye,o,"f"),i(this,pe,e,"f"),i(this,we,n,"f"),i(this,be,e.createApp(t),"f"),i(this,ve,r,"f")}initState(t,e){return r(this,ye,"f").initState(ae(this.name),t,e),this}addMethods(t){return r(this,ye,"f").onUnicast(t)}relyOn(t){return r(this,be,"f").relyOn(t),this}relateTo(t){return r(this,be,"f").relateTo(t),this}onActivate(t){return r(this,be,"f").onActivate(t),this}connect(t){if(!r(this,me,"f")[t]){const[e]=se(oe(t)),n=e.createSocket();r(this,me,"f")[t]=new ge(t,n)}return r(this,me,"f")[t]}load(t){return r(this,pe,"f").loadApp(t)}activate(t){return r(this,pe,"f").activateApp(t)}run(t){var e;return function(t,e,n,r){return new(n||(n=Promise))((function(e,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function o(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(t){t(r)}))).then(s,o)}a((r=r.apply(t,[])).next())}))}(this,0,void 0,(function*(){const n=r(this,ve,"f")||(null===(e=r(this,we,"f").getState(ce))||void 0===e?void 0:e.value),i=t=>{r(this,ve,"f")&&r(this,we,"f").setState(ce,t?"unfreeze the enviroment":"freeze the enviroment",(e=>{e.value=t}))},s={isEntry:r(this,ve,"f"),use:t=>{n&&r(this,pe,"f").use(t)},config:t=>{n&&r(this,pe,"f").config(t)},freeze:()=>{i(!1)},unfreeze:()=>{i(!0)}},o=t(new Proxy(s,{get:(t,e,n)=>"conf"===e?JSON.parse(JSON.stringify(r(this,pe,"f").conf)):Reflect.get(t,e,n),set:()=>!1}));yield Promise.resolve(o)}))}}pe=new WeakMap,we=new WeakMap,ve=new WeakMap,ye=new WeakMap,be=new WeakMap,me=new WeakMap;var Ee=function(t){const[e,n]=se();if(e.existApp(t))throw new Error(ue(t));const r=e.createSocket();return n&&r.initState(ce,{value:!0},!0),new _e(t,e,r,n)}("core").initState({root:null,slot:{home:null,setting:null},applications:[]}).onActivate((function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}(void 0,void 0,void 0,(function(){var t,e;return function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(r){switch(r.label){case 0:return[4,Promise.all([n.e(580),n.e(684),n.e(23)]).then(n.bind(n,1023))];case 1:return r.sent(),t=Date.now(),[4,Promise.all([n.e(580),n.e(241),n.e(190)]).then(n.bind(n,7190))];case 2:return r.sent(),e=Date.now(),console.log("inject runtime in ".concat(e-t,"ms")),[2]}}))}))}))}},c={};function l(t){var e=c[t];if(void 0!==e)return e.exports;var n=c[t]={exports:{}};return a[t].call(n.exports,n,n.exports,l),n.exports}l.m=a,l.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return l.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,l.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);l.r(i);var s={};t=t||[null,e({}),e([]),e(e)];for(var o=2&r&&n;"object"==typeof o&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach((t=>s[t]=()=>n[t]));return s.default=()=>n,l.d(i,s),i},l.d=(t,e)=>{for(var n in e)l.o(e,n)&&!l.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},l.f={},l.e=t=>Promise.all(Object.keys(l.f).reduce(((e,n)=>(l.f[n](t,e),e)),[])),l.u=t=>"static/js/"+t+"."+{23:"481c6ab9",190:"8ff559c6",241:"6411ba5d",428:"dafdf4e0",580:"6ad6ecda",684:"133caed9",757:"b71e04a5",853:"01c0c592"}[t]+".js",l.miniCssF=t=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),l.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},r="my-webpack-project:",l.l=(t,e,i,s)=>{if(n[t])n[t].push(e);else{var o,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==r+i){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.setAttribute("data-webpack",r+i),o.src=t),n[t]=[e];var f=(e,r)=>{o.onerror=o.onload=null,clearTimeout(d);var i=n[t];if(delete n[t],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((t=>t(r))),e)return e(r)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),a&&document.head.appendChild(o)}},l.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;l.g.importScripts&&(t=l.g.location+"");var e=l.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=t+"../../"})(),(()=>{var t={179:0};l.f.j=(e,n)=>{var r=l.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=t[e]=[n,i]));n.push(r[2]=i);var s=l.p+l.u(e),o=new Error;l.l(s,(n=>{if(l.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,r[1](o)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,i,[s,o,a]=n,c=0;if(s.some((e=>0!==t[e]))){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);a&&a(l)}for(e&&e(n);c<s.length;c++)i=s[c],l.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunkmy_webpack_project=self.webpackChunkmy_webpack_project||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),i=l(8426),s=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},i.v.run((function(t){return s(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.isEntry?[4,l.e(428).then(l.bind(l,428))]:[3,2];case 1:e.sent().runInEntryMode(t),e.label=2;case 2:return[2]}}))}))}))})();
//# sourceMappingURL=main.a3b3ba76.js.map